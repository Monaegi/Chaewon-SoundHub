{% load static %}

<div class="comment-track" data-instrument="{{ comment.instrument }}" id="comment-{{ comment.pk }}" data-pk="{{ comment.pk }}" data-type="track">

    <audio id="comment-track-{{ comment.pk }}" class="comment-track audio-file" preload="metadata" ontimeupdate="updateAudioInfo(this);updatePlayerProgress(this)" onended="resetWaveform(this)" onloadedmetadata="setTotalDuration(this)">
        <source src="{{ comment.comment_track.url }}">
    </audio>

    <a href="{% url 'views:user:user-detail' pk=comment.author.pk %}">
        {% if comment.author.profile_img.name == "" %}
            <div class="track-profile-img" style="background-image:url({% static 'img/default-profile.png' %})"></div>
        {% else %}
            <div class="track-profile-img" style="background-image:url({{ comment.author.profile_img.url }})"></div>
        {% endif %}
    </a>

    <div class="track-info">
        <!-- PLAY BTN -->
        <div draggable="false" id="comment-play-btn-{{ comment.pk }}" data-target="comment-track-{{ comment.pk }}" class="track-play-btn play-btn" onclick="loadAudio(this);playAudio();updatePlayerPostInfo();"><i class="fas fa-play-circle fa-3x"></i></div>
        <h1 class="track-title">{{ comment.instrument }} Track</h1>
        <a href="{% url 'views:user:user-detail' pk=comment.author.pk %}"><p class="track-author">by {{ comment.author }}</p></a>
        <!-- track duration -->
        <div class="playtime">
            <span id="playtime-current-{{ track.pk }}" class="track-duration-current">- - : - - </span> |
            <span id="playtime-total-{{ track.pk }}" class="track-duration-total"> - - : - - </span>
        </div>
    </div>

    <!-- track waveform -->
    {% if comment.comment_track_waveform_base.name == "" %}
    {% else %}
        <div class="track-waveform">
            <img class="track-waveform-base post-detail-waveform back-image no-filter" draggable="false" onclick="seekTrack(event)" src="{{ comment.comment_track_waveform_base.url }}">
            <div class="waveform-cover-cutter cutter">
                <img class="track-waveform-cover post-detail-waveform" src="{{ comment.comment_track_waveform_cover.url }}" alt="">
            </div>
        </div>
    {% endif %}
</div>